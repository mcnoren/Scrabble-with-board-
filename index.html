<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scrabble Scoreboard & Tile Logic</title>
<style>
    :root {
        --bg-color: #f3f4f6;
        --card-bg: #ffffff;
        --text-main: #1f2937;
        --text-muted: #6b7280;
        --score-bg: #111827;
        --score-text: #ffffff;
        --accent-green: #10b981;
        --accent-green-bg: #d1fae5;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--bg-color);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
    }

    h1 { margin-bottom: 30px; color: var(--text-main); }

    /* --- UI: Player Container --- */
    .scoreboard {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .player-card {
        background: var(--card-bg);
        padding: 24px;
        border-radius: 20px;
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        width: 280px;
        transition: transform 0.2s;
    }

    .player-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }

    .player-name {
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        color: var(--text-muted);
        font-weight: 700;
    }

    .tile-count {
        font-size: 12px;
        background: #e5e7eb;
        padding: 4px 8px;
        border-radius: 10px;
        color: var(--text-muted);
    }

    /* --- UI: Side-by-Side Points Layout --- */
    .score-wrapper {
        display: flex;
        align-items: center; /* This aligns the main score and prev points vertically */
        gap: 15px; /* Spacing between the boxes */
    }

    .current-score-box {
        background-color: var(--score-bg);
        color: var(--score-text);
        font-size: 42px;
        font-weight: 800;
        padding: 15px 0;
        border-radius: 16px;
        width: 120px;
        text-align: center;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .prev-turn-badge {
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 8px 16px;
        background-color: var(--accent-green-bg);
        color: var(--accent-green);
        border-radius: 14px;
        font-weight: 700;
        font-size: 18px;
        opacity: 0; /* Hidden by default until first move */
        transform: translateX(-10px);
        transition: all 0.3s ease-out;
    }

    .prev-turn-badge.visible {
        opacity: 1;
        transform: translateX(0);
    }

    .prev-label {
        font-size: 10px;
        text-transform: uppercase;
        opacity: 0.8;
        margin-bottom: 2px;
    }

    /* --- Controls --- */
    .controls {
        text-align: center;
    }
    
    button {
        background-color: #2563eb;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 16px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
    }
    button:hover { background-color: #1d4ed8; }
    
    .game-info {
        margin-top: 20px;
        font-family: monospace;
        color: var(--text-muted);
    }

</style>
</head>
<body>

    <h1>Scrabble Game Logic</h1>

    <div class="scoreboard">
        <div class="player-card" id="p1-card">
            <div class="player-header">
                <span class="player-name">Player 1</span>
                <span class="tile-count">Tiles: <span id="p1-tiles">0</span></span>
            </div>
            <div class="score-wrapper">
                <div class="current-score-box" id="p1-score">0</div>
                <div class="prev-turn-badge" id="p1-prev">
                    <span class="prev-label">Last Turn</span>
                    <span id="p1-delta">+0</span>
                </div>
            </div>
        </div>

        <div class="player-card" id="p2-card">
            <div class="player-header">
                <span class="player-name">Player 2</span>
                <span class="tile-count">Tiles: <span id="p2-tiles">0</span></span>
            </div>
            <div class="score-wrapper">
                <div class="current-score-box" id="p2-score">0</div>
                <div class="prev-turn-badge" id="p2-prev">
                    <span class="prev-label">Last Turn</span>
                    <span id="p2-delta">+0</span>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button onclick="playRandomTurn()">Simulate Random Turn</button>
        <div class="game-info">
            Tiles Remaining in Bag: <span id="bag-count">100</span>
        </div>
    </div>

<script>
    // --- 1. OFFICIAL SCRABBLE DATA ---
    const LETTER_DISTRIBUTION = {
        'A': 9, 'B': 2, 'C': 2, 'D': 4, 'E': 12, 'F': 2, 'G': 3, 'H': 2, 'I': 9, 
        'J': 1, 'K': 1, 'L': 4, 'M': 2, 'N': 6, 'O': 8, 'P': 2, 'Q': 1, 'R': 6, 
        'S': 4, 'T': 6, 'U': 4, 'V': 2, 'W': 2, 'X': 1, 'Y': 2, 'Z': 1, '_': 2 // _ is Blank
    };

    const LETTER_POINTS = {
        'A': 1, 'B': 3, 'C': 3, 'D': 2, 'E': 1, 'F': 4, 'G': 2, 'H': 4, 'I': 1, 
        'J': 8, 'K': 5, 'L': 1, 'M': 3, 'N': 1, 'O': 1, 'P': 3, 'Q': 10, 'R': 1, 
        'S': 1, 'T': 1, 'U': 1, 'V': 4, 'W': 4, 'X': 8, 'Y': 4, 'Z': 10, '_': 0
    };

    // --- 2. GAME STATE CLASS ---
    class ScrabbleGame {
        constructor() {
            this.tileBag = [];
            this.players = [
                { id: 1, score: 0, tiles: [], prevScore: 0 },
                { id: 2, score: 0, tiles: [], prevScore: 0 }
            ];
            this.currentPlayerIndex = 0;
            this.initBag();
            this.shuffleBag();
            this.dealInitialHands();
        }

        // Create the bag with exactly 100 tiles based on distribution
        initBag() {
            for (let letter in LETTER_DISTRIBUTION) {
                let count = LETTER_DISTRIBUTION[letter];
                for (let i = 0; i < count; i++) {
                    this.tileBag.push(letter);
                }
            }
        }

        // Fisher-Yates Shuffle Algorithm for random distribution
        shuffleBag() {
            for (let i = this.tileBag.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this.tileBag[i], this.tileBag[j]] = [this.tileBag[j], this.tileBag[i]];
            }
        }

        drawTiles(playerIndex, count) {
            const player = this.players[playerIndex];
            for (let i = 0; i < count; i++) {
                if (this.tileBag.length > 0) {
                    player.tiles.push(this.tileBag.pop());
                }
            }
        }

        dealInitialHands() {
            this.drawTiles(0, 7);
            this.drawTiles(1, 7);
        }

        // Simulates a player playing a word
        playTurn(pointsUsed) {
            const player = this.players[this.currentPlayerIndex];
            
            // Update Logic
            player.prevScore = pointsUsed;
            player.score += pointsUsed;
            
            // Remove random tiles to simulate playing (simple logic for demo)
            const tilesPlayed = Math.min(player.tiles.length, Math.floor(pointsUsed / 3) + 1);
            player.tiles.splice(0, tilesPlayed);
            
            // Draw new tiles
            this.drawTiles(this.currentPlayerIndex, tilesPlayed);

            // Switch turn
            this.currentPlayerIndex = this.currentPlayerIndex === 0 ? 1 : 0;
        }
    }

    // --- 3. UI INITIALIZATION ---
    const game = new ScrabbleGame();
    updateUI();

    function playRandomTurn() {
        // Simulate a random score between 5 and 40
        const randomScore = Math.floor(Math.random() * 35) + 5;
        
        // Identify who played BEFORE we switch turns in logic
        const activePlayerId = game.players[game.currentPlayerIndex].id;
        
        // Execute Logic
        game.playTurn(randomScore);
        
        // Update UI
        updateUI();

        // Animate the badge for the player who just played
        const badge = document.getElementById(`p${activePlayerId}-prev`);
        badge.classList.remove('visible');
        void badge.offsetWidth; // Trigger reflow to restart animation
        badge.classList.add('visible');
    }

    function updateUI() {
        document.getElementById('bag-count').innerText = game.tileBag.length;

        game.players.forEach(p => {
            // Update Main Score
            document.getElementById(`p${p.id}-score`).innerText = p.score;
            // Update Previous Turn Delta
            document.getElementById(`p${p.id}-delta`).innerText = `+${p.prevScore}`;
            // Update Tile Count
            document.getElementById(`p${p.id}-tiles`).innerText = p.tiles.length;
        });
    }

</script>

</body>
</html>
